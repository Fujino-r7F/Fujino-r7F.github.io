---
title: "DNSに関してまとめてみた"
date: 2021-09-26T19:50:57+09:00
description:
draft: false
hideToc: false
enableToc: true
enableTocContent: false
tocFolding: false
tocPosition: inner
tocLevels: ["h2", "h3", "h4"]
tags:
- DNS
series:
-
categories:
- DNS
image:
---
## はじめに
ブログを始めるに当たってドメイン周りの設定をした際に、DNSに関して理解が足りていないと感じたのでまとめてみました。

## そもそもDNSとは
Domain Name Systemの略でドメイン名とIPアドレスを対応づけるしくみのこと

## ドメイン名について
私のブログだと下記がドメイン名に当たる 
www.tech-ry.com 

ピリオドで区切られているそれぞれの部分を**ラベル**という 
最も右側のラベル(上記の例だとcom)をトップレベルドメインといい、一つ左のドメインを第２レベルドメインという。以下3,4レベルドメインというように続く 

## 名前解決について 
ドメイン名→IPアドレスに変換することを名前解決と呼ぶ 
www.tech-ry.comを例に名前解決について見ていく 

1. クライアントPCからキャッシュサーバに対して、www.tech-ry.comの問い合わせを行う
2. キャッシュサーバはルートサーバに問い合わせを行う
3. ルートサーバは「comのネームサーバ」に問い合わせるように回答する 
4. キャッシュサーバは「comのネームサーバ」に問い合わせる 
5. 「comのネームサーバ」はtech-ry.comのネームサーバの情報を回答する 
6. キャッシュサーバはtech-ry.comのネームサーバに問い合わせる 
7. tech-ry.comのネームサーバはキャッシュサーバにIPアドレスの情報を回答する 
8. キャッシュサーバはクライアントPCにIPアドレスの情報を回答する 

## DNSサーバの種類について
### キャッシュサーバ
DNSキャッシュサーバは「フルサービスリゾルバ」とも呼ばれるサーバで、クライアントPCから送られる名前解決要求を受けて、他のDNSサーバに対して繰り返し問い合わせを行うサーバのこと 
名前解決の際に得られた情報はキャッシュとして再利用する 
### ルートサーバ
ルートサーバは名前解決の起点となる「ルートゾーン」を保持するネームサーバのこと 
ルートゾーンにはトップレベルを管理する各ネームサーバの情報を保持している 
### ネームサーバ
NSリソースレコードによって指定されるサーバーで、権威DNSサーバとも呼ばれる。

## DNSレコードについて
DNSの動作のためにはDNSレコードという設定情報が必要になる。 

DNSレコードの種類には下記のようなモノがある 
1. Aレコード
ドメイン名に対してIPv4のアドレスを回答する 
AはAddressの頭文字から来てるらしい 
2. AAAAレコード
ドメイン名に対してIPv6のアドレスを回答する 
32bit(IPv4)→128bit(IPv6)で長さが4倍だからAAAAらしい 
3. PTRレコード 
IPアドレスからホスト名を参照する際に使用されるレコード 
4. SOAレコード 
Start of Authority recordの略で権威DNSサーバが管理するゾーンに関する情報を保存するレコード 
5. MXレコード 
Mail exchangeの略 
対象ドメイン宛メールの配送先のメールサーバのホスト名を定義しておくレコード 
6. NSレコード 
Name Serverの略 
ドメインに対して、そのドメインを管理する権威サーバの情報を返す 
7. CNAMEレコード 
CNAMEレコードはドメイン名に対する別名を定義するレコード 
8. TXTレコード 
ホスト名に関連づけるテキスト情報を定義するレコード　

